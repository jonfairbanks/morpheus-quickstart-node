<script type="text/javascript">
    RED.nodes.registerType('deploy-consumer', {
        category: 'Morpheus',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            deployConfig: { type: "deploy-config", required: true },
            // Blockchain Configuration
            walletKey: { value: "" },
            contractAddress: { value: "0xb8C55cD613af947E73E262F0d3C54b7211Af16CF" },
            morTokenAddress: { value: "0x34a285a1b1c166420df5b6630132542923b5b27e" },
            blockchainWsUrl: { value: "" },
            blockchainHttpUrl: { value: "https://sepolia-rollup.arbitrum.io/rpc" },
            explorerApiUrl: { value: "https://api-sepolia.arbiscan.io/api" },
            ethNodeChainId: { value: "421614" },
            ethNodeLegacyTx: { value: "false" },
            ethNodeUseSubscriptions: { value: "false" },
            // Service Configuration
            proxyAddress: { value: "0.0.0.0:3333" },
            webAddress: { value: "0.0.0.0:8082" },
            webPublicUrl: { value: "" },
            environment: { value: "development" },
            // Storage Configuration
            proxyStoreChatContext: { value: "true" },
            proxyStoragePath: { value: "./data/" },
            // Logging Configuration
            logLevel: { value: "info" },
            logFormat: { value: "text" },
            logColor: { value: "true" },
            // Performance Configuration
            providerCacheTtl: { value: "60" },
            maxConcurrentSessions: { value: "100" },
            sessionTimeout: { value: "3600" }
        },
        inputs: 1,
        outputs: 1,
        icon: "consumer.png",
        label: function() {
            return this.name || "Consumer";
        }
    });
</script>

<script type="text/html" data-template-name="deploy-consumer">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-deployConfig"><i class="fa fa-cog"></i> Configuration</label>
        <input type="text" id="node-input-deployConfig">
    </div>

    <div class="form-section-header">Blockchain Configuration</div>
    <div class="form-row">
        <label for="node-input-walletKey"><i class="fa fa-key"></i> Wallet Key</label>
        <input type="password" id="node-input-walletKey">
    </div>
    <div class="form-row">
        <label for="node-input-contractAddress"><i class="fa fa-file-contract"></i> Contract Address</label>
        <input type="text" id="node-input-contractAddress">
    </div>
    <div class="form-row">
        <label for="node-input-morTokenAddress"><i class="fa fa-coins"></i> MOR Token Address</label>
        <input type="text" id="node-input-morTokenAddress">
    </div>
    <div class="form-row">
        <label for="node-input-blockchainWsUrl"><i class="fa fa-plug"></i> Blockchain WS URL</label>
        <input type="text" id="node-input-blockchainWsUrl">
    </div>
    <div class="form-row">
        <label for="node-input-blockchainHttpUrl"><i class="fa fa-globe"></i> Blockchain HTTP URL</label>
        <input type="text" id="node-input-blockchainHttpUrl">
    </div>
    <div class="form-row">
        <label for="node-input-explorerApiUrl"><i class="fa fa-search"></i> Explorer API URL</label>
        <input type="text" id="node-input-explorerApiUrl">
    </div>
    <div class="form-row">
        <label for="node-input-ethNodeChainId"><i class="fa fa-link"></i> ETH Node Chain ID</label>
        <input type="text" id="node-input-ethNodeChainId">
    </div>
    <div class="form-row">
        <label for="node-input-ethNodeLegacyTx"><i class="fa fa-history"></i> ETH Node Legacy TX</label>
        <select id="node-input-ethNodeLegacyTx">
            <option value="true">True</option>
            <option value="false">False</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-ethNodeUseSubscriptions"><i class="fa fa-rss"></i> Use Subscriptions</label>
        <select id="node-input-ethNodeUseSubscriptions">
            <option value="true">True</option>
            <option value="false">False</option>
        </select>
    </div>

    <div class="form-section-header">Service Configuration</div>
    <div class="form-row">
        <label for="node-input-proxyAddress"><i class="fa fa-network-wired"></i> Proxy Address</label>
        <input type="text" id="node-input-proxyAddress">
    </div>
    <div class="form-row">
        <label for="node-input-webAddress"><i class="fa fa-globe"></i> Web Address</label>
        <input type="text" id="node-input-webAddress">
    </div>
    <div class="form-row">
        <label for="node-input-webPublicUrl"><i class="fa fa-link"></i> Web Public URL</label>
        <input type="text" id="node-input-webPublicUrl">
    </div>
    <div class="form-row">
        <label for="node-input-environment"><i class="fa fa-server"></i> Environment</label>
        <select id="node-input-environment">
            <option value="development">Development</option>
            <option value="staging">Staging</option>
            <option value="production">Production</option>
        </select>
    </div>

    <div class="form-section-header">Storage Configuration</div>
    <div class="form-row">
        <label for="node-input-proxyStoreChatContext"><i class="fa fa-database"></i> Store Chat Context</label>
        <select id="node-input-proxyStoreChatContext">
            <option value="true">True</option>
            <option value="false">False</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-proxyStoragePath"><i class="fa fa-folder"></i> Storage Path</label>
        <input type="text" id="node-input-proxyStoragePath">
    </div>

    <div class="form-section-header">Logging Configuration</div>
    <div class="form-row">
        <label for="node-input-logLevel"><i class="fa fa-level-up-alt"></i> Log Level</label>
        <select id="node-input-logLevel">
            <option value="debug">Debug</option>
            <option value="info">Info</option>
            <option value="warn">Warn</option>
            <option value="error">Error</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-logFormat"><i class="fa fa-file-alt"></i> Log Format</label>
        <select id="node-input-logFormat">
            <option value="text">Text</option>
            <option value="json">JSON</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-logColor"><i class="fa fa-palette"></i> Log Color</label>
        <select id="node-input-logColor">
            <option value="true">True</option>
            <option value="false">False</option>
        </select>
    </div>

    <div class="form-section-header">Performance Configuration</div>
    <div class="form-row">
        <label for="node-input-providerCacheTtl"><i class="fa fa-clock"></i> Provider Cache TTL</label>
        <input type="number" id="node-input-providerCacheTtl">
    </div>
    <div class="form-row">
        <label for="node-input-maxConcurrentSessions"><i class="fa fa-users"></i> Max Concurrent Sessions</label>
        <input type="number" id="node-input-maxConcurrentSessions">
    </div>
    <div class="form-row">
        <label for="node-input-sessionTimeout"><i class="fa fa-hourglass-end"></i> Session Timeout</label>
        <input type="number" id="node-input-sessionTimeout">
    </div>
</script>

<style>
    .form-section-header {
        padding: 10px 0;
        font-weight: bold;
        border-bottom: 1px solid #eee;
        margin: 20px 0 10px;
    }
</style> 