function cov_txhx4u95p(){var path="/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-consumer.js";var hash="ca78a2f2e027ec420ef041c73e5217279fcf9ba2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-consumer.js",statementMap:{"0":{start:{line:1,column:22},end:{line:1,column:58}},"1":{start:{line:3,column:0},end:{line:36,column:1}},"2":{start:{line:5,column:8},end:{line:5,column:43}},"3":{start:{line:8,column:8},end:{line:8,column:67}},"4":{start:{line:9,column:8},end:{line:9,column:49}},"5":{start:{line:11,column:8},end:{line:28,column:11}},"6":{start:{line:12,column:12},end:{line:27,column:13}},"7":{start:{line:13,column:36},end:{line:21,column:18}},"8":{start:{line:23,column:16},end:{line:23,column:46}},"9":{start:{line:24,column:16},end:{line:24,column:31}},"10":{start:{line:26,column:16},end:{line:26,column:47}},"11":{start:{line:30,column:8},end:{line:32,column:11}},"12":{start:{line:35,column:4},end:{line:35,column:66}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:31},end:{line:36,column:1}},line:3},"1":{name:"DeployConsumerNode",decl:{start:{line:4,column:13},end:{line:4,column:31}},loc:{start:{line:4,column:40},end:{line:33,column:5}},line:4},"2":{name:"(anonymous_2)",decl:{start:{line:11,column:25},end:{line:11,column:26}},loc:{start:{line:11,column:45},end:{line:28,column:9}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:42},end:{line:32,column:9}},line:30}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca78a2f2e027ec420ef041c73e5217279fcf9ba2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_txhx4u95p=function(){return actualCoverage;};}return actualCoverage;}cov_txhx4u95p();const DockerManager=(cov_txhx4u95p().s[0]++,require('../src/lib/docker-manager'));cov_txhx4u95p().s[1]++;module.exports=function(RED){cov_txhx4u95p().f[0]++;function DeployConsumerNode(config){cov_txhx4u95p().f[1]++;cov_txhx4u95p().s[2]++;RED.nodes.createNode(this,config);// Get configuration node
cov_txhx4u95p().s[3]++;this.deployConfig=RED.nodes.getNode(config.deployConfig);cov_txhx4u95p().s[4]++;this.dockerManager=new DockerManager();cov_txhx4u95p().s[5]++;this.on('input',async function(msg){cov_txhx4u95p().f[2]++;cov_txhx4u95p().s[6]++;try{const containerId=(cov_txhx4u95p().s[7]++,await this.dockerManager.deployContainer({image:'consumer-node:latest',env:{WALLET_CREDENTIALS:this.deployConfig.walletCredentials,...config.environmentVars},ports:config.ports,portBindings:config.portBindings}));cov_txhx4u95p().s[8]++;msg.containerId=containerId;cov_txhx4u95p().s[9]++;this.send(msg);}catch(error){cov_txhx4u95p().s[10]++;this.error(error.message,msg);}});cov_txhx4u95p().s[11]++;this.on('close',async function(){cov_txhx4u95p().f[3]++;}// Cleanup code
);}cov_txhx4u95p().s[12]++;RED.nodes.registerType("deploy-consumer",DeployConsumerNode);};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdHhoeDR1OTVwIiwiYWN0dWFsQ292ZXJhZ2UiLCJEb2NrZXJNYW5hZ2VyIiwicyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiUkVEIiwiZiIsIkRlcGxveUNvbnN1bWVyTm9kZSIsImNvbmZpZyIsIm5vZGVzIiwiY3JlYXRlTm9kZSIsImRlcGxveUNvbmZpZyIsImdldE5vZGUiLCJkb2NrZXJNYW5hZ2VyIiwib24iLCJtc2ciLCJjb250YWluZXJJZCIsImRlcGxveUNvbnRhaW5lciIsImltYWdlIiwiZW52IiwiV0FMTEVUX0NSRURFTlRJQUxTIiwid2FsbGV0Q3JlZGVudGlhbHMiLCJlbnZpcm9ubWVudFZhcnMiLCJwb3J0cyIsInBvcnRCaW5kaW5ncyIsInNlbmQiLCJlcnJvciIsIm1lc3NhZ2UiLCJyZWdpc3RlclR5cGUiXSwic291cmNlcyI6WyJkZXBsb3ktY29uc3VtZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRG9ja2VyTWFuYWdlciA9IHJlcXVpcmUoJy4uL3NyYy9saWIvZG9ja2VyLW1hbmFnZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihSRUQpIHtcbiAgICBmdW5jdGlvbiBEZXBsb3lDb25zdW1lck5vZGUoY29uZmlnKSB7XG4gICAgICAgIFJFRC5ub2Rlcy5jcmVhdGVOb2RlKHRoaXMsIGNvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgY29uZmlndXJhdGlvbiBub2RlXG4gICAgICAgIHRoaXMuZGVwbG95Q29uZmlnID0gUkVELm5vZGVzLmdldE5vZGUoY29uZmlnLmRlcGxveUNvbmZpZyk7XG4gICAgICAgIHRoaXMuZG9ja2VyTWFuYWdlciA9IG5ldyBEb2NrZXJNYW5hZ2VyKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIGFzeW5jIGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXJJZCA9IGF3YWl0IHRoaXMuZG9ja2VyTWFuYWdlci5kZXBsb3lDb250YWluZXIoe1xuICAgICAgICAgICAgICAgICAgICBpbWFnZTogJ2NvbnN1bWVyLW5vZGU6bGF0ZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgZW52OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBXQUxMRVRfQ1JFREVOVElBTFM6IHRoaXMuZGVwbG95Q29uZmlnLndhbGxldENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLmVudmlyb25tZW50VmFyc1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwb3J0czogY29uZmlnLnBvcnRzLFxuICAgICAgICAgICAgICAgICAgICBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3NcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtc2cuY29udGFpbmVySWQgPSBjb250YWluZXJJZDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQobXNnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlcnJvci5tZXNzYWdlLCBtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm9uKCdjbG9zZScsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gQ2xlYW51cCBjb2RlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBSRUQubm9kZXMucmVnaXN0ZXJUeXBlKFwiZGVwbG95LWNvbnN1bWVyXCIsIERlcGxveUNvbnN1bWVyTm9kZSk7XG59ICJdLCJtYXBwaW5ncyI6InlnRUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLGFBQWEsRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxFQUFDSixhQUFBLEdBQUFHLENBQUEsTUFFM0RFLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLFNBQVNDLEdBQUcsQ0FBRSxDQUFBUCxhQUFBLEdBQUFRLENBQUEsTUFDM0IsUUFBUyxDQUFBQyxrQkFBa0JBLENBQUNDLE1BQU0sQ0FBRSxDQUFBVixhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ2hDSSxHQUFHLENBQUNJLEtBQUssQ0FBQ0MsVUFBVSxDQUFDLElBQUksQ0FBRUYsTUFBTSxDQUFDLENBRWxDO0FBQUFWLGFBQUEsR0FBQUcsQ0FBQSxNQUNBLElBQUksQ0FBQ1UsWUFBWSxDQUFHTixHQUFHLENBQUNJLEtBQUssQ0FBQ0csT0FBTyxDQUFDSixNQUFNLENBQUNHLFlBQVksQ0FBQyxDQUFDYixhQUFBLEdBQUFHLENBQUEsTUFDM0QsSUFBSSxDQUFDWSxhQUFhLENBQUcsR0FBSSxDQUFBYixhQUFhLENBQUMsQ0FBQyxDQUFDRixhQUFBLEdBQUFHLENBQUEsTUFFekMsSUFBSSxDQUFDYSxFQUFFLENBQUMsT0FBTyxDQUFFLGVBQWVDLEdBQUcsQ0FBRSxDQUFBakIsYUFBQSxHQUFBUSxDQUFBLE1BQUFSLGFBQUEsR0FBQUcsQ0FBQSxNQUNqQyxHQUFJLENBQ0EsS0FBTSxDQUFBZSxXQUFXLEVBQUFsQixhQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLEtBQUksQ0FBQ1ksYUFBYSxDQUFDSSxlQUFlLENBQUMsQ0FDekRDLEtBQUssQ0FBRSxzQkFBc0IsQ0FDN0JDLEdBQUcsQ0FBRSxDQUNEQyxrQkFBa0IsQ0FBRSxJQUFJLENBQUNULFlBQVksQ0FBQ1UsaUJBQWlCLENBQ3ZELEdBQUdiLE1BQU0sQ0FBQ2MsZUFDZCxDQUFDLENBQ0RDLEtBQUssQ0FBRWYsTUFBTSxDQUFDZSxLQUFLLENBQ25CQyxZQUFZLENBQUVoQixNQUFNLENBQUNnQixZQUN6QixDQUFDLENBQUMsRUFBQzFCLGFBQUEsR0FBQUcsQ0FBQSxNQUVIYyxHQUFHLENBQUNDLFdBQVcsQ0FBR0EsV0FBVyxDQUFDbEIsYUFBQSxHQUFBRyxDQUFBLE1BQzlCLElBQUksQ0FBQ3dCLElBQUksQ0FBQ1YsR0FBRyxDQUFDLENBQ2xCLENBQUUsTUFBT1csS0FBSyxDQUFFLENBQUE1QixhQUFBLEdBQUFHLENBQUEsT0FDWixJQUFJLENBQUN5QixLQUFLLENBQUNBLEtBQUssQ0FBQ0MsT0FBTyxDQUFFWixHQUFHLENBQUMsQ0FDbEMsQ0FDSixDQUFDLENBQUMsQ0FBQ2pCLGFBQUEsR0FBQUcsQ0FBQSxPQUVILElBQUksQ0FBQ2EsRUFBRSxDQUFDLE9BQU8sQ0FBRSxnQkFBaUIsQ0FBQWhCLGFBQUEsR0FBQVEsQ0FBQSxNQUVsQyxDQURJO0FBQ0gsQ0FBQyxDQUNOLENBQUNSLGFBQUEsR0FBQUcsQ0FBQSxPQUVESSxHQUFHLENBQUNJLEtBQUssQ0FBQ21CLFlBQVksQ0FBQyxpQkFBaUIsQ0FBRXJCLGtCQUFrQixDQUFDLENBQ2pFLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=