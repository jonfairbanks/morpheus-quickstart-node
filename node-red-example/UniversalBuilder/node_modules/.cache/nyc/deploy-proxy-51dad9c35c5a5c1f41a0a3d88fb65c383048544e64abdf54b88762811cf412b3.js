function cov_llpo23x6s(){var path="/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-proxy.js";var hash="a57a8c6f55e7510068f4afc6abdc045f5c305c68";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-proxy.js",statementMap:{"0":{start:{line:1,column:22},end:{line:1,column:58}},"1":{start:{line:3,column:0},end:{line:36,column:1}},"2":{start:{line:5,column:8},end:{line:5,column:43}},"3":{start:{line:8,column:8},end:{line:8,column:67}},"4":{start:{line:9,column:8},end:{line:9,column:49}},"5":{start:{line:11,column:8},end:{line:28,column:11}},"6":{start:{line:12,column:12},end:{line:27,column:13}},"7":{start:{line:13,column:36},end:{line:21,column:18}},"8":{start:{line:23,column:16},end:{line:23,column:46}},"9":{start:{line:24,column:16},end:{line:24,column:31}},"10":{start:{line:26,column:16},end:{line:26,column:47}},"11":{start:{line:30,column:8},end:{line:32,column:11}},"12":{start:{line:35,column:4},end:{line:35,column:60}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:31},end:{line:36,column:1}},line:3},"1":{name:"DeployProxyNode",decl:{start:{line:4,column:13},end:{line:4,column:28}},loc:{start:{line:4,column:37},end:{line:33,column:5}},line:4},"2":{name:"(anonymous_2)",decl:{start:{line:11,column:25},end:{line:11,column:26}},loc:{start:{line:11,column:45},end:{line:28,column:9}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:42},end:{line:32,column:9}},line:30}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a57a8c6f55e7510068f4afc6abdc045f5c305c68"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_llpo23x6s=function(){return actualCoverage;};}return actualCoverage;}cov_llpo23x6s();const DockerManager=(cov_llpo23x6s().s[0]++,require('../src/lib/docker-manager'));cov_llpo23x6s().s[1]++;module.exports=function(RED){cov_llpo23x6s().f[0]++;function DeployProxyNode(config){cov_llpo23x6s().f[1]++;cov_llpo23x6s().s[2]++;RED.nodes.createNode(this,config);// Get configuration node
cov_llpo23x6s().s[3]++;this.deployConfig=RED.nodes.getNode(config.deployConfig);cov_llpo23x6s().s[4]++;this.dockerManager=new DockerManager();cov_llpo23x6s().s[5]++;this.on('input',async function(msg){cov_llpo23x6s().f[2]++;cov_llpo23x6s().s[6]++;try{const containerId=(cov_llpo23x6s().s[7]++,await this.dockerManager.deployContainer({image:'proxy-node:latest',env:{API_KEY:this.deployConfig.apiKey,...config.environmentVars},ports:config.ports,portBindings:config.portBindings}));cov_llpo23x6s().s[8]++;msg.containerId=containerId;cov_llpo23x6s().s[9]++;this.send(msg);}catch(error){cov_llpo23x6s().s[10]++;this.error(error.message,msg);}});cov_llpo23x6s().s[11]++;this.on('close',async function(){cov_llpo23x6s().f[3]++;}// Cleanup code
);}cov_llpo23x6s().s[12]++;RED.nodes.registerType("deploy-proxy",DeployProxyNode);};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfbGxwbzIzeDZzIiwiYWN0dWFsQ292ZXJhZ2UiLCJEb2NrZXJNYW5hZ2VyIiwicyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiUkVEIiwiZiIsIkRlcGxveVByb3h5Tm9kZSIsImNvbmZpZyIsIm5vZGVzIiwiY3JlYXRlTm9kZSIsImRlcGxveUNvbmZpZyIsImdldE5vZGUiLCJkb2NrZXJNYW5hZ2VyIiwib24iLCJtc2ciLCJjb250YWluZXJJZCIsImRlcGxveUNvbnRhaW5lciIsImltYWdlIiwiZW52IiwiQVBJX0tFWSIsImFwaUtleSIsImVudmlyb25tZW50VmFycyIsInBvcnRzIiwicG9ydEJpbmRpbmdzIiwic2VuZCIsImVycm9yIiwibWVzc2FnZSIsInJlZ2lzdGVyVHlwZSJdLCJzb3VyY2VzIjpbImRlcGxveS1wcm94eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEb2NrZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vc3JjL2xpYi9kb2NrZXItbWFuYWdlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFJFRCkge1xuICAgIGZ1bmN0aW9uIERlcGxveVByb3h5Tm9kZShjb25maWcpIHtcbiAgICAgICAgUkVELm5vZGVzLmNyZWF0ZU5vZGUodGhpcywgY29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBjb25maWd1cmF0aW9uIG5vZGVcbiAgICAgICAgdGhpcy5kZXBsb3lDb25maWcgPSBSRUQubm9kZXMuZ2V0Tm9kZShjb25maWcuZGVwbG95Q29uZmlnKTtcbiAgICAgICAgdGhpcy5kb2NrZXJNYW5hZ2VyID0gbmV3IERvY2tlck1hbmFnZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMub24oJ2lucHV0JywgYXN5bmMgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcklkID0gYXdhaXQgdGhpcy5kb2NrZXJNYW5hZ2VyLmRlcGxveUNvbnRhaW5lcih7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiAncHJveHktbm9kZTpsYXRlc3QnLFxuICAgICAgICAgICAgICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSV9LRVk6IHRoaXMuZGVwbG95Q29uZmlnLmFwaUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbmZpZy5lbnZpcm9ubWVudFZhcnNcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcG9ydHM6IGNvbmZpZy5wb3J0cyxcbiAgICAgICAgICAgICAgICAgICAgcG9ydEJpbmRpbmdzOiBjb25maWcucG9ydEJpbmRpbmdzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbXNnLmNvbnRhaW5lcklkID0gY29udGFpbmVySWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKG1zZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyb3IubWVzc2FnZSwgbXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5vbignY2xvc2UnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIENsZWFudXAgY29kZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgUkVELm5vZGVzLnJlZ2lzdGVyVHlwZShcImRlcGxveS1wcm94eVwiLCBEZXBsb3lQcm94eU5vZGUpO1xufSAiXSwibWFwcGluZ3MiOiJnZ0VBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosS0FBTSxDQUFBRSxhQUFhLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsMkJBQTJCLENBQUMsRUFBQ0osYUFBQSxHQUFBRyxDQUFBLE1BRTNERSxNQUFNLENBQUNDLE9BQU8sQ0FBRyxTQUFTQyxHQUFHLENBQUUsQ0FBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQzNCLFFBQVMsQ0FBQUMsZUFBZUEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFWLGFBQUEsR0FBQVEsQ0FBQSxNQUFBUixhQUFBLEdBQUFHLENBQUEsTUFDN0JJLEdBQUcsQ0FBQ0ksS0FBSyxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFFRixNQUFNLENBQUMsQ0FFbEM7QUFBQVYsYUFBQSxHQUFBRyxDQUFBLE1BQ0EsSUFBSSxDQUFDVSxZQUFZLENBQUdOLEdBQUcsQ0FBQ0ksS0FBSyxDQUFDRyxPQUFPLENBQUNKLE1BQU0sQ0FBQ0csWUFBWSxDQUFDLENBQUNiLGFBQUEsR0FBQUcsQ0FBQSxNQUMzRCxJQUFJLENBQUNZLGFBQWEsQ0FBRyxHQUFJLENBQUFiLGFBQWEsQ0FBQyxDQUFDLENBQUNGLGFBQUEsR0FBQUcsQ0FBQSxNQUV6QyxJQUFJLENBQUNhLEVBQUUsQ0FBQyxPQUFPLENBQUUsZUFBZUMsR0FBRyxDQUFFLENBQUFqQixhQUFBLEdBQUFRLENBQUEsTUFBQVIsYUFBQSxHQUFBRyxDQUFBLE1BQ2pDLEdBQUksQ0FDQSxLQUFNLENBQUFlLFdBQVcsRUFBQWxCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEtBQU0sS0FBSSxDQUFDWSxhQUFhLENBQUNJLGVBQWUsQ0FBQyxDQUN6REMsS0FBSyxDQUFFLG1CQUFtQixDQUMxQkMsR0FBRyxDQUFFLENBQ0RDLE9BQU8sQ0FBRSxJQUFJLENBQUNULFlBQVksQ0FBQ1UsTUFBTSxDQUNqQyxHQUFHYixNQUFNLENBQUNjLGVBQ2QsQ0FBQyxDQUNEQyxLQUFLLENBQUVmLE1BQU0sQ0FBQ2UsS0FBSyxDQUNuQkMsWUFBWSxDQUFFaEIsTUFBTSxDQUFDZ0IsWUFDekIsQ0FBQyxDQUFDLEVBQUMxQixhQUFBLEdBQUFHLENBQUEsTUFFSGMsR0FBRyxDQUFDQyxXQUFXLENBQUdBLFdBQVcsQ0FBQ2xCLGFBQUEsR0FBQUcsQ0FBQSxNQUM5QixJQUFJLENBQUN3QixJQUFJLENBQUNWLEdBQUcsQ0FBQyxDQUNsQixDQUFFLE1BQU9XLEtBQUssQ0FBRSxDQUFBNUIsYUFBQSxHQUFBRyxDQUFBLE9BQ1osSUFBSSxDQUFDeUIsS0FBSyxDQUFDQSxLQUFLLENBQUNDLE9BQU8sQ0FBRVosR0FBRyxDQUFDLENBQ2xDLENBQ0osQ0FBQyxDQUFDLENBQUNqQixhQUFBLEdBQUFHLENBQUEsT0FFSCxJQUFJLENBQUNhLEVBQUUsQ0FBQyxPQUFPLENBQUUsZ0JBQWlCLENBQUFoQixhQUFBLEdBQUFRLENBQUEsTUFFbEMsQ0FESTtBQUNILENBQUMsQ0FDTixDQUFDUixhQUFBLEdBQUFHLENBQUEsT0FFREksR0FBRyxDQUFDSSxLQUFLLENBQUNtQixZQUFZLENBQUMsY0FBYyxDQUFFckIsZUFBZSxDQUFDLENBQzNELENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=