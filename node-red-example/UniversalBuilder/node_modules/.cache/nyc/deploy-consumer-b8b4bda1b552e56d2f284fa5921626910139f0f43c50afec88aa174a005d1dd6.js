function cov_txhx4u95p(){var path="/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-consumer.js";var hash="ca42e07132c2bab19906871912cac90bb2109a75";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/scottterry/Workspace/AgentGarage/UniversalBuilder/nodes/deploy-consumer.js",statementMap:{"0":{start:{line:1,column:0},end:{line:50,column:1}},"1":{start:{line:3,column:8},end:{line:3,column:43}},"2":{start:{line:6,column:8},end:{line:6,column:32}},"3":{start:{line:7,column:8},end:{line:7,column:42}},"4":{start:{line:8,column:8},end:{line:8,column:54}},"5":{start:{line:9,column:8},end:{line:9,column:54}},"6":{start:{line:10,column:8},end:{line:10,column:58}},"7":{start:{line:13,column:8},end:{line:16,column:9}},"8":{start:{line:14,column:27},end:{line:14,column:54}},"9":{start:{line:15,column:12},end:{line:15,column:49}},"10":{start:{line:17,column:8},end:{line:20,column:9}},"11":{start:{line:18,column:27},end:{line:18,column:60}},"12":{start:{line:19,column:12},end:{line:19,column:55}},"13":{start:{line:22,column:8},end:{line:41,column:11}},"14":{start:{line:23,column:12},end:{line:27,column:13}},"15":{start:{line:24,column:16},end:{line:24,column:76}},"16":{start:{line:25,column:16},end:{line:25,column:31}},"17":{start:{line:26,column:16},end:{line:26,column:23}},"18":{start:{line:30,column:12},end:{line:30,column:50}},"19":{start:{line:31,column:12},end:{line:31,column:62}},"20":{start:{line:32,column:12},end:{line:32,column:62}},"21":{start:{line:33,column:12},end:{line:33,column:66}},"22":{start:{line:35,column:12},end:{line:38,column:14}},"23":{start:{line:40,column:12},end:{line:40,column:27}},"24":{start:{line:44,column:8},end:{line:46,column:11}},"25":{start:{line:49,column:4},end:{line:49,column:66}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:31},end:{line:50,column:1}},line:1},"1":{name:"DeployConsumerNode",decl:{start:{line:2,column:13},end:{line:2,column:31}},loc:{start:{line:2,column:40},end:{line:47,column:5}},line:2},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:25},end:{line:22,column:26}},loc:{start:{line:22,column:39},end:{line:41,column:9}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:44,column:25},end:{line:44,column:26}},loc:{start:{line:44,column:36},end:{line:46,column:9}},line:44}},branchMap:{"0":{loc:{start:{line:13,column:8},end:{line:16,column:9}},type:"if",locations:[{start:{line:13,column:8},end:{line:16,column:9}},{start:{line:13,column:8},end:{line:16,column:9}}],line:13},"1":{loc:{start:{line:13,column:12},end:{line:13,column:93}},type:"binary-expr",locations:[{start:{line:13,column:12},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:61}},{start:{line:13,column:65},end:{line:13,column:93}}],line:13},"2":{loc:{start:{line:17,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:17,column:8},end:{line:20,column:9}},{start:{line:17,column:8},end:{line:20,column:9}}],line:17},"3":{loc:{start:{line:17,column:12},end:{line:17,column:111}},type:"binary-expr",locations:[{start:{line:17,column:12},end:{line:17,column:32}},{start:{line:17,column:36},end:{line:17,column:73}},{start:{line:17,column:77},end:{line:17,column:111}}],line:17},"4":{loc:{start:{line:23,column:12},end:{line:27,column:13}},type:"if",locations:[{start:{line:23,column:12},end:{line:27,column:13}},{start:{line:23,column:12},end:{line:27,column:13}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca42e07132c2bab19906871912cac90bb2109a75"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_txhx4u95p=function(){return actualCoverage;};}return actualCoverage;}cov_txhx4u95p();cov_txhx4u95p().s[0]++;module.exports=function(RED){cov_txhx4u95p().f[0]++;function DeployConsumerNode(config){cov_txhx4u95p().f[1]++;cov_txhx4u95p().s[1]++;RED.nodes.createNode(this,config);// Store configuration
cov_txhx4u95p().s[2]++;this.name=config.name;cov_txhx4u95p().s[3]++;this.walletKey=config.walletKey;cov_txhx4u95p().s[4]++;this.contractAddress=config.contractAddress;cov_txhx4u95p().s[5]++;this.blockchainWsUrl=config.blockchainWsUrl;cov_txhx4u95p().s[6]++;this.blockchainHttpUrl=config.blockchainHttpUrl;// Handle environment variable substitution
cov_txhx4u95p().s[7]++;if((cov_txhx4u95p().b[1][0]++,this.walletKey)&&(cov_txhx4u95p().b[1][1]++,this.walletKey.startsWith('${'))&&(cov_txhx4u95p().b[1][2]++,this.walletKey.endsWith('}'))){cov_txhx4u95p().b[0][0]++;const envVar=(cov_txhx4u95p().s[8]++,this.walletKey.slice(2,-1));cov_txhx4u95p().s[9]++;this.walletKey=process.env[envVar];}else{cov_txhx4u95p().b[0][1]++;}cov_txhx4u95p().s[10]++;if((cov_txhx4u95p().b[3][0]++,this.contractAddress)&&(cov_txhx4u95p().b[3][1]++,this.contractAddress.startsWith('${'))&&(cov_txhx4u95p().b[3][2]++,this.contractAddress.endsWith('}'))){cov_txhx4u95p().b[2][0]++;const envVar=(cov_txhx4u95p().s[11]++,this.contractAddress.slice(2,-1));cov_txhx4u95p().s[12]++;this.contractAddress=process.env[envVar];}else{cov_txhx4u95p().b[2][1]++;}cov_txhx4u95p().s[13]++;this.on('input',function(msg){cov_txhx4u95p().f[2]++;cov_txhx4u95p().s[14]++;if(!msg.config){cov_txhx4u95p().b[4][0]++;cov_txhx4u95p().s[15]++;msg.payload={error:'Missing deployment configuration'};cov_txhx4u95p().s[16]++;this.send(msg);cov_txhx4u95p().s[17]++;return;}else{cov_txhx4u95p().b[4][1]++;}// Add consumer-specific configuration
cov_txhx4u95p().s[18]++;msg.config.walletKey=this.walletKey;cov_txhx4u95p().s[19]++;msg.config.contractAddress=this.contractAddress;cov_txhx4u95p().s[20]++;msg.config.blockchainWsUrl=this.blockchainWsUrl;cov_txhx4u95p().s[21]++;msg.config.blockchainHttpUrl=this.blockchainHttpUrl;cov_txhx4u95p().s[22]++;msg.payload={status:'Consumer configuration added',config:msg.config};cov_txhx4u95p().s[23]++;this.send(msg);});// Clean up resources when node is removed
cov_txhx4u95p().s[24]++;this.on('close',function(){cov_txhx4u95p().f[3]++;}// Cleanup code
);}cov_txhx4u95p().s[25]++;RED.nodes.registerType("deploy-consumer",DeployConsumerNode);};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdHhoeDR1OTVwIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwibW9kdWxlIiwiZXhwb3J0cyIsIlJFRCIsImYiLCJEZXBsb3lDb25zdW1lck5vZGUiLCJjb25maWciLCJub2RlcyIsImNyZWF0ZU5vZGUiLCJuYW1lIiwid2FsbGV0S2V5IiwiY29udHJhY3RBZGRyZXNzIiwiYmxvY2tjaGFpbldzVXJsIiwiYmxvY2tjaGFpbkh0dHBVcmwiLCJiIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwiZW52VmFyIiwic2xpY2UiLCJwcm9jZXNzIiwiZW52Iiwib24iLCJtc2ciLCJwYXlsb2FkIiwiZXJyb3IiLCJzZW5kIiwic3RhdHVzIiwicmVnaXN0ZXJUeXBlIl0sInNvdXJjZXMiOlsiZGVwbG95LWNvbnN1bWVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUkVEKSB7XG4gICAgZnVuY3Rpb24gRGVwbG95Q29uc3VtZXJOb2RlKGNvbmZpZykge1xuICAgICAgICBSRUQubm9kZXMuY3JlYXRlTm9kZSh0aGlzLCBjb25maWcpO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgY29uZmlndXJhdGlvblxuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWcubmFtZTtcbiAgICAgICAgdGhpcy53YWxsZXRLZXkgPSBjb25maWcud2FsbGV0S2V5O1xuICAgICAgICB0aGlzLmNvbnRyYWN0QWRkcmVzcyA9IGNvbmZpZy5jb250cmFjdEFkZHJlc3M7XG4gICAgICAgIHRoaXMuYmxvY2tjaGFpbldzVXJsID0gY29uZmlnLmJsb2NrY2hhaW5Xc1VybDtcbiAgICAgICAgdGhpcy5ibG9ja2NoYWluSHR0cFVybCA9IGNvbmZpZy5ibG9ja2NoYWluSHR0cFVybDtcblxuICAgICAgICAvLyBIYW5kbGUgZW52aXJvbm1lbnQgdmFyaWFibGUgc3Vic3RpdHV0aW9uXG4gICAgICAgIGlmICh0aGlzLndhbGxldEtleSAmJiB0aGlzLndhbGxldEtleS5zdGFydHNXaXRoKCckeycpICYmIHRoaXMud2FsbGV0S2V5LmVuZHNXaXRoKCd9JykpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudlZhciA9IHRoaXMud2FsbGV0S2V5LnNsaWNlKDIsIC0xKTtcbiAgICAgICAgICAgIHRoaXMud2FsbGV0S2V5ID0gcHJvY2Vzcy5lbnZbZW52VmFyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250cmFjdEFkZHJlc3MgJiYgdGhpcy5jb250cmFjdEFkZHJlc3Muc3RhcnRzV2l0aCgnJHsnKSAmJiB0aGlzLmNvbnRyYWN0QWRkcmVzcy5lbmRzV2l0aCgnfScpKSB7XG4gICAgICAgICAgICBjb25zdCBlbnZWYXIgPSB0aGlzLmNvbnRyYWN0QWRkcmVzcy5zbGljZSgyLCAtMSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRyYWN0QWRkcmVzcyA9IHByb2Nlc3MuZW52W2VudlZhcl07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMub24oJ2lucHV0JywgZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICBpZiAoIW1zZy5jb25maWcpIHtcbiAgICAgICAgICAgICAgICBtc2cucGF5bG9hZCA9IHsgZXJyb3I6ICdNaXNzaW5nIGRlcGxveW1lbnQgY29uZmlndXJhdGlvbicgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQobXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBjb25zdW1lci1zcGVjaWZpYyBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICBtc2cuY29uZmlnLndhbGxldEtleSA9IHRoaXMud2FsbGV0S2V5O1xuICAgICAgICAgICAgbXNnLmNvbmZpZy5jb250cmFjdEFkZHJlc3MgPSB0aGlzLmNvbnRyYWN0QWRkcmVzcztcbiAgICAgICAgICAgIG1zZy5jb25maWcuYmxvY2tjaGFpbldzVXJsID0gdGhpcy5ibG9ja2NoYWluV3NVcmw7XG4gICAgICAgICAgICBtc2cuY29uZmlnLmJsb2NrY2hhaW5IdHRwVXJsID0gdGhpcy5ibG9ja2NoYWluSHR0cFVybDtcblxuICAgICAgICAgICAgbXNnLnBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnQ29uc3VtZXIgY29uZmlndXJhdGlvbiBhZGRlZCcsXG4gICAgICAgICAgICAgICAgY29uZmlnOiBtc2cuY29uZmlnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNlbmQobXNnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVzb3VyY2VzIHdoZW4gbm9kZSBpcyByZW1vdmVkXG4gICAgICAgIHRoaXMub24oJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBDbGVhbnVwIGNvZGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFJFRC5ub2Rlcy5yZWdpc3RlclR5cGUoXCJkZXBsb3ktY29uc3VtZXJcIiwgRGVwbG95Q29uc3VtZXJOb2RlKTtcbn0gIl0sIm1hcHBpbmdzIjoidzdIQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQUFBQSxhQUFBLEdBQUFFLENBQUEsTUFmWkMsTUFBTSxDQUFDQyxPQUFPLENBQUcsU0FBU0MsR0FBRyxDQUFFLENBQUFMLGFBQUEsR0FBQU0sQ0FBQSxNQUMzQixRQUFTLENBQUFDLGtCQUFrQkEsQ0FBQ0MsTUFBTSxDQUFFLENBQUFSLGFBQUEsR0FBQU0sQ0FBQSxNQUFBTixhQUFBLEdBQUFFLENBQUEsTUFDaENHLEdBQUcsQ0FBQ0ksS0FBSyxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFFRixNQUFNLENBQUMsQ0FFbEM7QUFBQVIsYUFBQSxHQUFBRSxDQUFBLE1BQ0EsSUFBSSxDQUFDUyxJQUFJLENBQUdILE1BQU0sQ0FBQ0csSUFBSSxDQUFDWCxhQUFBLEdBQUFFLENBQUEsTUFDeEIsSUFBSSxDQUFDVSxTQUFTLENB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